{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "AVD Solution Accelerator Landing Zone",
            "steps": [
                {
                    "name": "basics",
                    "label": "Getting started",
                    "elements": [
                        {
                            "name": "info",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "The AVD Solution Accelerator provisions the foundational items required to build and run an Azure Virtual Desktop environment.",
                                "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/overview",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "resourceScope",
                            "type": "Microsoft.Common.ResourceScope",
                            "location": {
                                "resourceTypes": []
                            }
                        }
                    ]
                },
                {
                    "name": "AVDLandingZone",
                    "label": "Components",
                    "elements": [
                        {
                            "name": "avdNaming",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Resource naming",
                            "defaultValue": "Simple (Recommended)",
                            "toolTip": "",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Simple (Recommended)",
                                        "value": true
                                    },
                                    {
                                        "label": "Advanced",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "workspaceName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Workspace name",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "A workspace is a logical grouping of application groups (published desktops and/or applications)",
                            "constraints": {
                                "required": true,
                                "regex": "",
                                "validationMessage": ""
                            },
                            "visible": "[equals(steps('AVDLandingZone').avdNaming, false)]"
                        },
                        {
                            "name": "appGroupName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Application group name",
                            "defaultValue": "",
                            "placeholder": "",
                            "toolTip": "An app group is a logical grouping of applications installed on session hosts in the host pool.",
                            "constraints": {
                                "required": true,
                                "regex": "",
                                "validationMessage": ""
                            },
                            "visible": "[equals(steps('AVDLandingZone').avdNaming, false)]"
                        },
                        {
                            "name": "hostPoolName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Host pool name",
                            "defaultValue": "",
                            "placeholder": "",
                            "toolTip": "A host pool is a collection of virtual machines deployed from the same base image.",
                            "constraints": {
                                "required": true,
                                "regex": "",
                                "validationMessage": ""
                            },
                            "visible": "[equals(steps('AVDLandingZone').avdNaming, false)]"
                        },
                        {
                            "name": "avdNamingConvention",
                            "type": "Microsoft.Common.TextBox",
                            "label": "AVD names",
                            "placeholder": "Example: finance",
                            "defaultValue": "",
                            "toolTip": "Resources will be derived from this name. workspace-name, app-name, hostpool-name",
                            "constraints": {
                                "required": true,
                                "regex": "",
                                "validationMessage": ""
                            },
                            "visible": "[equals(steps('AVDLandingZone').avdNaming, true)]"
                        },
                        {
                            "name": "line",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "________________________________________________________________________________________________________________________________"
                            }
                        },
                        {
                            "name": "friendlyNameSection",
                            "type": "Microsoft.Common.Section",
                            "label": "Friendly Names",
                            "visible": true,
                            "elements": [
                                {
                                    "name": "friendlyNameInfo",
                                    "type": "Microsoft.Common.TextBlock",
                                    "visible": true,
                                    "options": {
                                        "text": "Friendly names make it easier for end-users to identify resources they have been assigned",
                                        "link": {
                                            "label": "Example",
                                            "uri": "https://github.com/Azure/avdaccelerator/blob/em-customui/Images/friendlyName.png"
                                        }
                                    }
                                },
                                {
                                    "name": "workspaceFriendlyName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workspace name",
                                    "placeholder": "Example: Finance Applications",
                                    "defaultValue": "",
                                    "toolTip": "This name is visible to users and is how applications will be grouped in the AVD user interface.",
                                    "constraints": {
                                        "required": true,
                                        "regex": "",
                                        "validationMessage": ""
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "sessionHostFriendly",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Desktop name",
                                    "defaultValue": "",
                                    "placeholder": "Example: My Desktop",
                                    "toolTip": "This name is visible to users and is the name of the desktop.",
                                    "constraints": {
                                        "required": true,
                                        "regex": "",
                                        "validationMessage": ""
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "line",
                                    "type": "Microsoft.Common.TextBlock",
                                    "visible": true,
                                    "options": {
                                        "text": "________________________________________________________________________________________________________________________________"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "hostPoolSection",
                            "type": "Microsoft.Common.Section",
                            "label": "Host Pool",
                            "visible": true,
                            "elements": [
                                {
                                    "name": "hostPoolInfo",
                                    "type": "Microsoft.Common.TextBlock",
                                    "visible": true,
                                    "options": {
                                        "text": "A host pool is a collection of virtual machines deployed from the same image",
                                        "link": {
                                            "label": "Info",
                                            "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/environment-setup#host-pools"
                                        }
                                    }
                                },
                                {
                                    "name": "hostPoolType",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Host pool type",
                                    "defaultValue": "Pooled",
                                    "multiLine": true,
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Pooled",
                                                "description": "Multiple users per-VM",
                                                "value": "Pooled"
                                            },
                                            {
                                                "label": "Personal",
                                                "description": "Single user per-VM",
                                                "value": "Personal"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "loadBalancer",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Load balancer",
                                    "defaultValue": "DepthFirst",
                                    "multiLine": true,
                                    "toolTip": "Breadth-first load balancing distributes new user sessions across all available session hosts in the host pool. Depth-first load balancing distributes new user sessions to an available session host with the highest number of connections but has not reached its maximum session limit threshold.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "BreadthFirst",
                                                "description": "Each new user is placed on the next VM. (Performance Optimized)",
                                                "value": "BreadthFirst"
                                            },
                                            {
                                                "label": "DepthFirst",
                                                "description": "Each new user is placed on the same VM until max sessions limit. (Cost Optimized)",
                                                "value": "DepthFirst"
                                            }
                                        ]
                                    },
                                    "visible": "[equals(steps('AVDLandingZone').hostPoolSection.hostPoolType, 'Pooled')]"
                                },
                                {
                                    "name": "maxSessions",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Max sessions",
                                    "defaultValue": "4",
                                    "toolTip": "The maximum number of users that have concurrent sessions on a session host. When setting a host pool to have depth first load balancing or planning to use Autoscaling, you must set an appropriate max session limit according to the configuration of your deployment and capacity of your VMs.",
                                    "constraints": {
                                        "required": false,
                                        "regex": "",
                                        "validationMessage": ""
                                    },
                                    "visible": "[equals(steps('AVDLandingZone').hostPoolSection.hostPoolType, 'Pooled')]"
                                },
                                {
                                    "name": "assignmentType",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Machine assignment",
                                    "defaultValue": "Automatic (Recommended)",
                                    "multiLine": true,
                                    "toolTip": "Automatic assignment – The service will select an available host and assign it to an user. Direct assignment – Admin selects a specific host to assign to an user.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Automatic (Recommended)",
                                                "description": "Users are assigned an available VM the first time they connect.",
                                                "value": "Automatic"
                                            },
                                            {
                                                "label": "Direct",
                                                "description": "An administrator assigns a VM for each individual user.",
                                                "value": "Direct"
                                            }
                                        ]
                                    },
                                    "visible": "[equals(steps('AVDLandingZone').hostPoolSection.hostPoolType, 'Personal')]"
                                },
                                {
                                    "name": "startVmOnConnect",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Start on connect",
                                    "defaultValue": "Yes (Recommended)",
                                    "toolTip": "If powered off, start VM once user connects. ",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Yes (Recommended)",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "createVmRole",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Create start VM on connect role",
                                    "defaultValue": "Yes (Required if using Start On Connect)",
                                    "toolTip": "Create custom Azure IAM role for Start VM on Connect",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Yes (Required if using Start On Connect)",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    },
                                    "visible": "[equals(steps('AVDLandingZone').hostPoolSection.startVmOnConnect, true)]"
                                },
                                {
                                    "name": "vmRoleWarning",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('AVDLandingZone').hostPoolSection.createVmRole, false)]",
                                    "options": {
                                        "text": "Start VM on Connect will not work without a custom role definition. If you enable start on connect, but do not specify a custom role VM's will not start on-demand.",
                                        "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/start-virtual-machine-connect",
                                        "style": "Warning"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "hostPoolOptions",
                    "label": "Host pool settings",
                    "elements": [
                        {
                            "name": "sessionAdjust",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Adjust session behavior",
                            "defaultValue": "No",
                            "toolTip": "Settings for client re-connect, network connections, video playback, and compression.",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "sessionBehavior",
                            "type": "Microsoft.Common.Section",
                            "label": "Session Behavior",
                            "visible": "[equals(steps('hostPoolOptions').sessionAdjust, true)]",
                            "elements": [
                                {
                                    "name": "hpReconnection",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Reconnection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the client computer will automatically try to reconnect to the remote computer if the connection is dropped.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Client automatically tries to reconnect (Default)",
                                                "value": "autoreconnection enabled:1:"
                                            },
                                            {
                                                "label": "Client does not automatically try to reconnect",
                                                "value": {
                                                    "name": "autoreconnection enabled:0:"
                                                }
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpBandwidth",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Bandwidth auto detect",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether to use automatic network bandwidth detection or not. Requires the option bandwidthautodetect to be set and correlates with connection type 7.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Use automatic network bandwidth (Default)",
                                                "value": "bandwidthautodetect:i:1"
                                            },
                                            {
                                                "label": "Do not use automatic network bandwidth detection",
                                                "value": "bandwidthautodetect:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpNetworkauto",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Network auto detect",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Enables the option for automatic detection of the network type. Used in conjunction with networkautodetect. Also see connection type.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Enable automatic network type detection (Default)",
                                                "value": "networkautodetect:i:1"
                                            },
                                            {
                                                "label": "Disable automatic network type detection",
                                                "value": "networkautodetect:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpCompression",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Compression",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the connection should use bulk compression.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Enable RDP bulk compression (Default)",
                                                "value": "compression:i:1"
                                            },
                                            {
                                                "label": "Disable RDP bulk compression",
                                                "value": "compression:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpVideoPlayback",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Video playback",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether RDC will use RDP efficient multimedia streaming for video playback.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Use RDP-effecient multimedia streaming for video playback when possible (Default)",
                                                "value": "videoplaybackmode:i:1"
                                            },
                                            {
                                                "label": "Don't use RDP-effecient multimedia streaming for video playback",
                                                "value": "videoplaybackmode:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                }
                            ]
                        },
                        {
                            "name": "deviceAdjust",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Adjust device redirection",
                            "defaultValue": "No",
                            "toolTip": "Settings for client device redirection including audio/visual, drives/storage, USB devices, Clipboard, smart cards, COM ports, and printers.",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "deviceRedirection",
                            "type": "Microsoft.Common.Section",
                            "label": "Device redirection",
                            "visible": "[equals(steps('hostPoolOptions').deviceAdjust, true)]",
                            "elements": [
                                {
                                    "name": "hpMicRedirect",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Microphone redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines how sounds captured (recorded) on the local computer are handled when you are connected to the remote computer.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Enable audio capture from the local device and redirection to an audio application in the remote session",
                                                "value": "audiocapturemode:i:1"
                                            },
                                            {
                                                "label": "Disable audio capture from the local device (Default)",
                                                "value": {
                                                    "name": "audiocapturemode:i:0"
                                                }
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpRedirectEncoding",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Redirect video encoding",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Enables or disables encoding of redirected video.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Enable encoding of redirected video (Default)",
                                                "value": "encode redirected video capture:i:1"
                                            },
                                            {
                                                "label": "Disable encoding of redirected video",
                                                "value": "encode redirected video capture:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpVideoQuality",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Encoded video quality",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Controls the quality of encoded video.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "High compression video. Quality my suffer when there is a lot of motion (Default)",
                                                "value": "redirected video capture encoding quality:i:0"
                                            },
                                            {
                                                "label": "Medium compression",
                                                "value": "redirected video capture encoding quality:i:1"
                                            },
                                            {
                                                "label": "Low compression video with high picture quality",
                                                "value": "redirected video capture encoding quality:i:2"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpAudioOut",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Audio output location",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the local or remote machine plays audio.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Play sounds on the local computer (Default)",
                                                "value": "audiomode:i:0"
                                            },
                                            {
                                                "label": "Play sounds on the remote computer",
                                                "value": "audiomode:i:1"
                                            },
                                            {
                                                "label": "Do not play sounds",
                                                "value": "audiomode:i:2"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpCamera",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Camera redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Configures which cameras to redirect. This setting uses a semicolon-delimited list of KSCATEGORY_VIDEO_CAMERA interfaces of cameras enabled for redirection.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Redirect all cameras",
                                                "value": "camerastoredirect:s:*"
                                            },
                                            {
                                                "label": "Don't redirect any cameras (Default)",
                                                "value": "camerastoredirect:s:"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpDriveRedirection",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Drive/storage redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines which disk drives on the local computer will be redirected and available in the remote session.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Redirect all drives, including ones that are connected later",
                                                "value": "drivestoredirect:s:*"
                                            },
                                            {
                                                "label": "DynamicDrives: redirect any drives that are connected later",
                                                "value": "drivestoredirect:s:dynamicdrives"
                                            },
                                            {
                                                "label": "Manually enter drives and labels",
                                                "value": "manualDrives"
                                            },
                                            {
                                                "label": "Don't redirect any drives (Default)",
                                                "value": "drivestoredirect:s:"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpSelectedDriveRedirection",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Drives",
                                    "defaultValue": "C\\:\\;E\\:\\",
                                    "toolTip": "Manually choose which drives should be redirected.",
                                    "placeholder": "Example (redirect C and E drives): C\\:\\; E\\:\\",
                                    "multiLine": false,
                                    "visible": "[equals(steps('hostPoolOptions').deviceRedirection.hpDriveRedirection, 'manualDrives')]",
                                    "constraints": {
                                        "required": false,
                                        "validations": [
                                            {
                                                "regex": "^[a-zA-Z]\\\\:\\\\",
                                                "message": "Drive redirect format error: Drive format: C\\:\\"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "hpRedirectclipboard",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Clipboard redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether clipboard redirection is enabled.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Clipboard on local computer is available in remote session (Default)",
                                                "value": "redirectclipboard:i:1"
                                            },
                                            {
                                                "label": "Clipboard on local computer is not available in remote session",
                                                "value": "redirectclipboard:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpRedirectcomports",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "COM ports redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether COM (serial) ports on the local computer will be redirected and available in the remote session.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "COM ports on the local computer are available in the remote session",
                                                "value": "redirectcomports:i:1"
                                            },
                                            {
                                                "label": "COM ports on the local computer are not available in the remote session (Default)",
                                                "value": "redirectcomports:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpRedirectprinters",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Printer redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether printers configured on the local computer will be redirected and available in the remote session.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "The printers on the local computer are available in the remote session (Default)",
                                                "value": "redirectprinters:i:1"
                                            },
                                            {
                                                "label": "The printers on the local computer are not available in the remote session",
                                                "value": "redirectprinters:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpredirectsmartcards",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Smart card redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether smart card devices on the local computer will be redirected and available in the remote session.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "The smart card device on the local computer is available in the remote session (Default)",
                                                "value": "redirectsmartcards:i:1"
                                            },
                                            {
                                                "label": "The smart card device on the local computer is not available in the remote session",
                                                "value": "redirectsmartcards:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpusbdevicestoredirect",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "USB redirection",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines which supported RemoteFX USB devices on the client computer will be redirected and available in the remote session when you connect to a remote session that supports RemoteFX USB redirection.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Redirect all USB devices that are not already redirected by another high-level redirection",
                                                "value": "usbdevicestoredirect:s:*"
                                            },
                                            {
                                                "label": "Redirect all devices that are members of the specified device setup class or device defined by specific instance ID",
                                                "value": "usbInstanceIds"
                                            },
                                            {
                                                "label": "Don't redirect Redirect any USB devices (Default)",
                                                "value": "usbdevicestoredirect:s:"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "hpSelectedUsbdevicestoredirect",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "USB Device ID's",
                                    "defaultValue": "",
                                    "toolTip": "Choose which USB device or class ID's should be redirected.",
                                    "placeholder": "Example: 52ae366d-f376-4c62-a2d9-e0fce0cc2a18\\;6aea2da3-17cb-4cd7-9977-47c9cae404ab",
                                    "multiLine": true,
                                    "visible": "[equals(steps('hostPoolOptions').deviceRedirection.hpusbdevicestoredirect, 'usbInstanceIds')]",
                                    "constraints": {
                                        "required": false,
                                        "validations": []
                                    }
                                }
                            ]
                        },
                        {
                            "name": "displayAdjust",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Adjust display settings",
                            "defaultValue": "No",
                            "toolTip": "Settings for client display for multiple-monitors, resolution, and screen re-sizing.",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "displaySettings",
                            "type": "Microsoft.Common.Section",
                            "label": "Display settings",
                            "visible": "[equals(steps('hostPoolOptions').displayAdjust, true)]",
                            "elements": [
                                {
                                    "name": "multimon",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Multiple displays",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the remote session will use one or multiple displays from the local computer.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Enable multiple display support (Default)",
                                                "value": "use multimon:i:1"
                                            },
                                            {
                                                "label": "Do not enable multiple display support",
                                                "value": "use multimon:i:0"
                                            }
                                        ]
                                    },
                                    "visible": true
                                },
                                {
                                    "name": "selectedmonitors",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Multiple displays",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": "[equals(steps('hostPoolOptions').displaySettings.multimon, 'use multimon:i:1')]",
                                    "defaultValue": "Not configured",
                                    "toolTip": "Specifies which local displays to use from the remote session. The selected displays must be contiguous.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "All displays (Default)",
                                                "value": "selectedmonitors:s:"
                                            },
                                            {
                                                "label": "Manually enter list of machine specific display IDs",
                                                "value": "selectedmonitors:s:value"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "maximizetocurrentdisplays",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Maximize to current displays",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": "[equals(steps('hostPoolOptions').displaySettings.multimon, 'use multimon:i:1')]",
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines which display the remote session goes full screen on when maximizing.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Session dynamically goes full screen on the displays touched by the session window when maximizing",
                                                "value": "maximizetocurrentdisplays:i:1"
                                            },
                                            {
                                                "label": "Session goes full screen on the displays initially selected when maximizing (Default)",
                                                "value": "maximizetocurrentdisplays:i:0"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "singlemoninwindowedmode",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Multi to single display switch",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": "[equals(steps('hostPoolOptions').displaySettings.multimon, 'use multimon:i:1')]",
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether a multi display remote session automatically switches to single display when exiting full screen.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Session switches to single display when exiting full screen",
                                                "value": "singlemoninwindowedmode:i:1"
                                            },
                                            {
                                                "label": "Session retains all displays when exiting full screen (Default)",
                                                "value": "singlemoninwindowedmode:i:0"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "screenmodeid",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Screen mode",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": true,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the remote session window appears full screen when you launch the connection.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "The remote session will appear full screen (Default)",
                                                "value": "screen mode id:i:2"
                                            },
                                            {
                                                "label": "The remote session will appear in a window",
                                                "value": "screen mode id:i:1"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "smartsizing",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Smart sizing",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": true,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether or not the local computer scales the content of the remote session to fit the window size.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "The local window content will scale when resized",
                                                "value": "smart sizing:i:1"
                                            },
                                            {
                                                "label": "The local window content will not scale when resized (Default)",
                                                "value": "smart sizing:i:0"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "dynamicresolution",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Dynamic resolution",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": true,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Determines whether the resolution of the remote session is automatically updated when the local window is resized.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "Session resolution updates as the local window resizes (Default)",
                                                "value": "dynamic resolution:i:1"
                                            },
                                            {
                                                "label": "Session resolution remains static for the duration of the session",
                                                "value": "dynamic resolution:i:0"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "desktopsizeid",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Desktop size (Default match local computer)",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "visible": true,
                                    "defaultValue": "Not configured",
                                    "toolTip": "Specifies the dimensions of the remote session desktop from a set of pre-defined options. This setting is overridden if desktopheight and desktopwidth are specified.",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Not configured",
                                                "value": null
                                            },
                                            {
                                                "label": "640×480",
                                                "value": "desktop size id:i:0"
                                            },
                                            {
                                                "label": "800×600",
                                                "value": "desktop size id:i:1"
                                            },
                                            {
                                                "label": "1024×768",
                                                "value": "desktop size id:i:2"
                                            },
                                            {
                                                "label": "1280×1024",
                                                "value": "desktop size id:i:3"
                                            },
                                            {
                                                "label": "1600×1200",
                                                "value": "desktop size id:i:4"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },


                        {
                            "name": "avdMonitoringPrompt",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Log Analytics Workspace",
                            "defaultValue": "Existing",
                            "toolTip": "Log workspace for collecting AVD monitoring metrics",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "New",
                                        "value": true
                                    },
                                    {
                                        "label": "Existing",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "subscriptionApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "subscriptions?api-version=2020-01-01"
                            }
                        },
                        {
                            "name": "logWorkspaceSub",
                            "label": "Subscription with existing Log Analytics Workspace",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('hostPoolOptions').avdMonitoringPrompt, false)]",
                            "defaultValue": "",
                            "toolTip": "Select the subscription of your Log Analytics Workspace. It is common to have this centralized in a management subscription.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('hostPoolOptions').subscriptionApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.id, '\",\"description\":\"', 'ID: ', item.subscriptionId, '\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "logworkspaceApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "[concat(steps('hostPoolOptions').logWorkspaceSub, '/providers/microsoft.operationalinsights/workspaces?api-version=2021-06-01')]"
                            }
                        },
                        {
                            "name": "logWorkspaceId",
                            "label": "Private DNS Zone Azure Files (privatelink.file.core.windows.net)",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('hostPoolOptions').avdMonitoringPrompt, false)]",
                            "defaultValue": "",
                            "toolTip": "Log Analytics Workspace",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(filter(steps('hostPoolOptions').logworkspaceApi.value,(item) => contains(item.name)),(item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.id, '\",\"description\":\"', 'Resource Group: ', last(take(split(item.id, '/'), 5)), '\"}')))]",
                                "required": true
                            }
                        }






                    ]
                },
                {
                    "name": "AVDNetwork",
                    "label": "Network",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "vnetInfoBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "When not leveraging AAD Join, AVD requires connectivity to either AADDS or Active Directory domain controllers in order to domain join AVD systems. When creating a new VNet for AVD systems it is important to setup VNet peering to an established VNet that has existing connectivity to domain controllers or AADDS.",
                                "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/network-connectivity",
                                "style": "info"
                            }
                        },                        
                        {
                            "name": "createAvdVnet",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Network",
                            "defaultValue": "New",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "New",
                                        "value": true
                                    },
                                    {
                                        "label": "Existing",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "avdVnetNAme",
                            "type": "Microsoft.Common.TextBox",
                            "label": "VNet Name",
                            "defaultValue": "",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "regex": ""
                            },
                            "visible": "[equals(steps('AVDNetwork').createAvdVnet, true)]"
                        },
                        {
                            "name": "avdVnetSize",
                            "type": "Microsoft.Common.TextBox",
                            "label": "VNet Address Space",
                            "toolTip": "Virtual network for AVD virtual machines",
                            "placeholder": "Example: 10.10.0.0/24",
                            "constraints": {
                                "required": true,
                                "regex": ""
                            },
                            "visible": "[equals(steps('AVDNetwork').createAvdVnet, true)]"
                        },
                        {
                            "name": "avdVnetDNS",
                            "type": "Microsoft.Common.TextBox",
                            "label": "VNet DNS Servers",
                            "defaultValue": "",
                            "placeholder": "Example: 10.10.100.50, 10.20.100.50",
                            "toolTip": "Separate multiple entries with a comma",
                            "constraints": {
                                "required": true,
                                "regex": ""
                            },
                            "visible": "[equals(steps('AVDNetwork').createAvdVnet, true)]"
                        },
                        {
                            "name": "vnetSelector",
                            "type": "Microsoft.Solutions.ResourceSelector",
                            "label": "Existing VNet",
                            "visible": "[equals(steps('AVDNetwork').createAvdVnet, false)]",
                            "resourceType": "Microsoft.Network/virtualNetworks",
                            "options": {
                                "filter": {
                                    "subscription": "onBasics",
                                    "location": "onBasics"
                                }
                            }
                        },
                        {
                            "name": "subnetApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "[concat(steps('AVDNetwork').vnetSelector.id, '/subnets?api-version=2021-03-01')]"
                            }
                        },
                        {
                            "name": "subnetId",
                            "label": "Existing Subnet",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('AVDNetwork').createAvdVnet, false)]",
                            "defaultValue": "",
                            "toolTip": "Select the subnet.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('AVDNetwork').subnetApi.value,(item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.id, '\",\"description\":\"', 'Resource Group: ', last(take(split(item.id, '/'), 5)), '\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "createProfileStorage",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create User Profile Storage",
                            "visible": true,
                            "defaultValue": "Yes (Recommended)",
                            "toolTip": "",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Yes (Recommended)",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "profileShareSize",
                            "type": "Microsoft.Common.Slider",
                            "min": 1,
                            "max": 20,
                            "label": "File Share Size",
                            "defaultValue": 1,
                            "subLabel": "x 100GB",
                            "showStepMarkers": true,
                            "toolTip": "Size of Premium File share in 100GB increments",
                            "constraints": {
                                "required": true
                            },
                            "visible": "[equals(steps('AVDNetwork').createProfileStorage, true)]"
                        },
                        {
                            "name": "fileBackup",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable Azure Backup for User Profile Data",
                            "defaultValue": "Yes (Recommended)",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Yes (Recommended)",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": "[equals(steps('AVDNetwork').createProfileStorage, true)]"
                        },
                        {
                            "name": "backupWarning",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[equals(steps('AVDNetwork').fileBackup, false)]",
                            "options": {
                                "text": "It is strongly advised to backup user profile data. Backups protect against corruption, accidental deletion, and ransomware.",
                                "uri": "https://docs.microsoft.com/en-us/azure/backup/azure-file-share-backup-overview",
                                "style": "Warning"
                            }
                        },
                        {
                            "name": "privateDnsPrompt",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Private DNS Zone",
                            "defaultValue": "New",
                            "toolTip": "This is used to provide private access to user profile storage",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "New",
                                        "value": true
                                    },
                                    {
                                        "label": "Existing",
                                        "value": false
                                    }
                                ]
                            },
                            "visible": "[equals(steps('AVDNetwork').createProfileStorage, true)]"
                        },
                        {
                            "name": "subscriptionApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "subscriptions?api-version=2020-01-01"
                            }
                        },
                        {
                            "name": "privateDnsZonesSub",
                            "label": "Subscription with Private DNS Zones",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('AVDNetwork').privateDnsPrompt, false)]",
                            "defaultValue": "",
                            "toolTip": "Select the subscription of your private DNS zones. It is common to have these centralized in a connectivity subscription.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('AVDNetwork').subscriptionApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.id, '\",\"description\":\"', 'ID: ', item.subscriptionId, '\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "privateDnsZonesApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "[concat(steps('AVDNetwork').privateDnsZonesSub, '/providers/Microsoft.Network/privateDnsZones?api-version=2018-09-01')]"
                            }
                        },
                        {
                            "name": "privateDnsZoneIdFiles",
                            "label": "Private DNS Zone Azure Files (privatelink.file.core.windows.net)",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('AVDNetwork').privateDnsPrompt, false)]",
                            "defaultValue": "",
                            "toolTip": "Private DNS Zone for Azure Files (privatelink.file.core.windows.net).",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(filter(steps('AVDNetwork').privateDnsZonesApi.value,(item) => contains(item.name, 'privatelink.file.core.windows.net')),(item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.id, '\",\"description\":\"', 'Resource Group: ', last(take(split(item.id, '/'), 5)), '\"}')))]",
                                "required": true
                            }
                        }
                    ]
                },
                {
                    "name": "Images",
                    "label": "Image customization",
                    "elements": [
                        {
                            "name": "buildImages",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Images to Build",
                            "multiselect": true,
                            "selectAll": true,
                            "defaultValue": "Select all",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Win10 Enterprise 20H2",
                                        "value": {
                                            "name": "Windows10_20H2",
                                            "osType": "Windows",
                                            "osState": "Generalized",
                                            "offer": "Windows-10",
                                            "publisher": "MicrosoftWindowsDesktop",
                                            "sku": "20h2-evd"
                                        }
                                    },
                                    {
                                        "label": "Win10 Enterprise 20H2 + M365",
                                        "value": {
                                            "name": "Windows10_20H2_Office",
                                            "osType": "Windows",
                                            "osState": "Generalized",
                                            "offer": "office-365",
                                            "publisher": "MicrosoftWindowsDesktop",
                                            "sku": "20h2-evd-o365pp"
                                        }
                                    },
                                    {
                                        "label": "Win11 Enterprise",
                                        "value": {
                                            "name": "Windows11_21H2",
                                            "osType": "Windows",
                                            "osState": "Generalized",
                                            "offer": "windows-11",
                                            "publisher": "MicrosoftWindowsDesktop",
                                            "sku": "win11-21h2-avd"
                                        }
                                    },
                                    {
                                        "label": "Win11 Enterprise 21H2 + M365",
                                        "value": {
                                            "name": "Windows11_21H2_Office",
                                            "osType": "Windows",
                                            "osState": "Generalized",
                                            "offer": "office-365",
                                            "publisher": "MicrosoftWindowsDesktop",
                                            "sku": "win11-21h2-avd-m365"
                                        }
                                    }                                                                            
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "replicaInfo",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "For performance reasons it is recommended to have 1 replica for every 20 concurrent VM deployments.",
                                "uri": "https://docs.microsoft.com/en-us/azure/virtual-machines/shared-image-galleries#scaling",
                                "style": "info"
                            }
                        },
                        {
                            "name": "imageReplicas",
                            "type": "Microsoft.Common.Slider",
                            "min": 1,
                            "max": 15,
                            "label": "Image Replicas",
                            "defaultValue": 1,
                            "showStepMarkers": true,
                            "toolTip": "Number of in-region replicas for scaling performance.",
                            "constraints": {
                                "required": true
                            },
                            "visible": true
                        },
                        {
                            "name": "imageCustomization",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Image Customizations",
                            "multiselect": true,
                            "selectAll": true,
                            "defaultValue": "Select all",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "RDP Shortpath",
                                        "value": {
                                            "name": "RDP",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Screen Capture Protection",
                                        "value": {
                                            "name": "New-NetFirewallRule -DisplayName 'Remote Desktop - Shortpath (UDP-In)'  -Action Allow -Description 'Inbound rule for the Remote Desktop service to allow RDP traffic. [UDP 3390]' -Group '@FirewallAPI.dll,-28752' -Name 'RemoteDesktop-UserMode-In-Shortpath-UDP'  -PolicyStore PersistentStore -Profile Domain, Private -Service TermService -Protocol udp -LocalPort 3390 -Program '%SystemRoot%\\system32\\svchost.exe' -Enabled:True",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Disable Automatic Updates",
                                        "value": {
                                            "name": "reg add 'HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU' /v NoAutoUpdate /t REG_DWORD /d 1 /f",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Time Zone Redirection",
                                        "value": {
                                            "name": "reg add 'HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows NT\\Terminal Services' /v fEnableTimeZoneRedirection /t REG_DWORD /d 1 /f",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Disable Storage Sense",
                                        "value": {
                                            "name": "reg add 'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\StorageSense\\Parameters\\StoragePolicy' /v 01 /t REG_DWORD /d 0 /f",
                                            "scriptType": "inline"
                                        }
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "fslProfCustomization",
                            "type": "Microsoft.Common.DropDown",
                            "label": "FSLogix Profile Container",
                            "multiselect": true,
                            "selectAll": true,
                            "defaultValue": "Select all",
                            "toolTip": "",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Container Naming: Username followed by SID",
                                        "value": {
                                            "name": "namesid",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Virtual Disk Type: VHDX",
                                        "value": {
                                            "name": "vhdx",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Delete Local Profile when FSLogix Profile Should Apply",
                                        "value": {
                                            "name": "fsldeleteprof",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Prevent Login with Failure",
                                        "value": {
                                            "name": "logindeny",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Prevent Login with Temporary Profile",
                                        "value": {
                                            "name": "tempprof",
                                            "scriptType": "inline"
                                        }
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "fslCustomization",
                            "type": "Microsoft.Common.DropDown",
                            "label": "FSLogix Office Container",
                            "multiselect": true,
                            "selectAll": true,
                            "defaultValue": "Select all",
                            "toolTip": "",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Include Office in Cache",
                                        "value": {
                                            "name": "ocache",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Include Outlook in Cache",
                                        "value": {
                                            "name": "outcache",
                                            "scriptType": "uri",
                                            "scriptLocation": "https://aka.ms/avdgpo"
                                        }
                                    },
                                    {
                                        "label": "Include Teams in Cache",
                                        "value": {
                                            "name": "teamscache",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Include Search Database in Cache",
                                        "value": {
                                            "name": "searchcache",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Include OneNote in Cache",
                                        "value": {
                                            "name": "onenotecache",
                                            "scriptType": "inline"
                                        }
                                    },
                                    {
                                        "label": "Include OneDrive in Cache",
                                        "value": {
                                            "name": "onedrivecache",
                                            "scriptType": "inline"
                                        }
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "imageRegionReplicas",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Image Regions",
                            "defaultValue": "Select all",
                            "multiselect": true,
                            "selectAll": true,
                            "filter": true,
                            "toolTip": "Select the regions where this image will be deployed.",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Australia Central",
                                        "value": "australiacentral"
                                    },
                                    {
                                        "label": "Australia Central 2",
                                        "value": "australiacentral2"
                                    },
                                    {
                                        "label": "Australia East",
                                        "value": "australiaeast"
                                    },
                                    {
                                        "label": "Australia Southeast",
                                        "value": "australiasoutheast"
                                    },
                                    {
                                        "label": "Brazil South",
                                        "value": "brazilsouth"
                                    },
                                    {
                                        "label": "Brazil Southeast",
                                        "value": "brazilsoutheast"
                                    },
                                    {
                                        "label": "Canada Central",
                                        "value": "canadacentral"
                                    },
                                    {
                                        "label": "Canada East",
                                        "value": "canadaeast"
                                    },
                                    {
                                        "label": "Central India",
                                        "value": "centralindia"
                                    },
                                    {
                                        "label": "Central US",
                                        "value": "centralus"
                                    },
                                    {
                                        "label": "East Asia",
                                        "value": "eastasia"
                                    },
                                    {
                                        "label": "East US",
                                        "value": "eastus"
                                    },
                                    {
                                        "label": "East US 2",
                                        "value": "eastus2"
                                    },
                                    {
                                        "label": "France Central",
                                        "value": "francecentral"
                                    },
                                    {
                                        "label": "France South",
                                        "value": "francesouth"
                                    },
                                    {
                                        "label": "Germany North",
                                        "value": "germanynorth"
                                    },
                                    {
                                        "label": "Germany West Central",
                                        "value": "germanywestcentral"
                                    },
                                    {
                                        "label": "Japan East",
                                        "value": "japaneast"
                                    },
                                    {
                                        "label": "Japan West",
                                        "value": "japanwest"
                                    },
                                    {
                                        "label": "Korea Central",
                                        "value": "koreacentral"
                                    },
                                    {
                                        "label": "Korea South",
                                        "value": "koreasouth"
                                    },
                                    {
                                        "label": "North Central US",
                                        "value": "northcentralus"
                                    },
                                    {
                                        "label": "North Europe",
                                        "value": "northeurope"
                                    },
                                    {
                                        "label": "Norway East",
                                        "value": "norwayeast"
                                    },
                                    {
                                        "label": "Norway West",
                                        "value": "norwaywest"
                                    },
                                    {
                                        "label": "South Africa North",
                                        "value": "southafricanorth"
                                    },
                                    {
                                        "label": "South Africa West",
                                        "value": "southafricawest"
                                    },
                                    {
                                        "label": "South Central US",
                                        "value": "southcentralus"
                                    },
                                    {
                                        "label": "South India",
                                        "value": "southindia"
                                    },
                                    {
                                        "label": "Southeast Asia",
                                        "value": "southeastasia"
                                    },
                                    {
                                        "label": "Sweden Central",
                                        "value": "swedencentral"
                                    },
                                    {
                                        "label": "Switzerland North",
                                        "value": "switzerlandnorth"
                                    },
                                    {
                                        "label": "Switzerland West",
                                        "value": "switzerlandwest"
                                    },
                                    {
                                        "label": "UAE Central",
                                        "value": "uaecentral"
                                    },
                                    {
                                        "label": "UAE North",
                                        "value": "uaenorth"
                                    },
                                    {
                                        "label": "UK South",
                                        "value": "uksouth"
                                    },
                                    {
                                        "label": "UK West",
                                        "value": "ukwest"
                                    },
                                    {
                                        "label": "West Central US",
                                        "value": "westcentralus"
                                    },
                                    {
                                        "label": "West Europe",
                                        "value": "westeurope"
                                    },
                                    {
                                        "label": "West India",
                                        "value": "westindia"
                                    },
                                    {
                                        "label": "West US",
                                        "value": "westus"
                                    },
                                    {
                                        "label": "West US 2",
                                        "value": "westus2"
                                    },
                                    {
                                        "label": "West US 3",
                                        "value": "westus3"
                                    }
                                ]
                            },
                            "visible": true
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "avdResourceGroup": "[steps('basics').resourceScope.resourceGroup.name]",
                "location": "[steps('basics').resourceScope.location]",
                "hostPoolType": "[steps('AVDLandingZone').hostPoolSection.hostPoolType]",
                "loadBalancer": "[steps('AVDLandingZone').hostPoolSection.loadBalancer]",
                "maxSessions": "[steps('AVDLandingZone').hostPoolSection.maxSessions]",
                "assignmentType": "[steps('AVDLandingZone').hostPoolSection.assignmentType]",
                "startVmOnConnect": "[steps('AVDLandingZone').hostPoolSection.startVmOnConnect]",
                "createVmRole": "[steps('AVDLandingZone').hostPoolSection.createVmRole]",
                "createProfileStorage": "[steps('AVDNetwork').createProfileStorage]",
                "fileBackup": "[steps('AVDNetwork').fileBackup]"
            },
            "kind": "ResourceGroup"
        }
    }
}